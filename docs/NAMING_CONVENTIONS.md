# üìã Convenciones de Nomenclatura - ML API FastAPI v2

Esta gu√≠a establece las convenciones est√°ndar para nombrar archivos, directorios, variables, funciones y clases en nuestro proyecto.

## üìÅ Archivos y Directorios

### üóÇÔ∏è **Directorios**

| Tipo | Convenci√≥n | Ejemplo | Descripci√≥n |
|------|------------|---------|-------------|
| **Principales** | `kebab-case` | `web-app/`, `admin-panel/` | Directorios ra√≠z del proyecto |
| **Python packages** | `snake_case` | `prediction_service/`, `ml_models/` | Paquetes Python |
| **Frontend** | `kebab-case` | `src/components/`, `public/assets/` | Directorios frontend |
| **Config** | `lowercase` | `config/`, `docs/`, `scripts/` | Configuraci√≥n y utilitarios |

### üìÑ **Archivos por Tecnolog√≠a**

#### **Python (.py)**

| Tipo | Convenci√≥n | Ejemplo | Descripci√≥n |
|------|------------|---------|-------------|
| **M√≥dulos** | `snake_case` | `prediction_service.py`, `user_model.py` | Archivos Python |
| **Tests** | `test_` prefix | `test_user_model.py`, `test_tdd_health.py` | Tests con prefijo |
| **Clases** | **PascalCase** en archivo `snake_case` | `UserModel` en `user_model.py` | Clase en archivo descriptivo |
| **Utilities** | `snake_case` | `file_handler.py`, `validators.py` | Funciones utilitarias |
| **Scripts** | `snake_case` | `git_best_practices.py`, `tech_debt_analyzer.py` | Scripts de automatizaci√≥n |

‚úÖ **Ejemplos CORRECTOS:**
```
backend/app/models/user.py               # ‚úÖ Modelo usuario
backend/app/services/prediction_service.py # ‚úÖ Servicio predicci√≥n
backend/tests/unit/test_user_model.py    # ‚úÖ Test unitario
infrastructure/scripts/git_best_practices.py # ‚úÖ Script an√°lisis
```

‚ùå **Ejemplos INCORRECTOS:**
```
backend/app/models/User.py               # ‚ùå PascalCase archivo
backend/app/services/predictionService.py # ‚ùå camelCase
backend/tests/unit/UserModelTest.py      # ‚ùå Sin prefijo test_
infrastructure/scripts/gitBestPractices.py # ‚ùå camelCase script
```

#### **TypeScript/JavaScript (.ts/.js)**

| Tipo | Convenci√≥n | Ejemplo | Descripci√≥n |
|------|------------|---------|-------------|
| **Componentes React** | **PascalCase** | `UserProfile.tsx`, `PredictionForm.tsx` | Componentes UI |
| **Servicios** | `camelCase` | `api.ts`, `websocket.ts` | Servicios y utilidades |
| **Pages** | **PascalCase** | `Home.tsx`, `Dashboard.tsx` | P√°ginas principales |
| **Types/Interfaces** | `camelCase` | `types.ts`, `interfaces.ts` | Definiciones de tipos |
| **Tests** | `.test.` o `.spec.` | `UserProfile.test.tsx`, `api.spec.ts` | Tests frontend |

‚úÖ **Ejemplos CORRECTOS:**
```
frontend/web-app/src/components/UserProfile.tsx  # ‚úÖ Componente React
frontend/web-app/src/services/api.ts            # ‚úÖ Servicio API
frontend/web-app/src/pages/Dashboard.tsx        # ‚úÖ P√°gina principal
frontend/web-app/src/types/interfaces.ts        # ‚úÖ Definiciones tipos
```

#### **Configuraci√≥n y Scripts**

| Tipo | Convenci√≥n | Ejemplo | Descripci√≥n |
|------|------------|---------|-------------|
| **Config** | `lowercase` + extensi√≥n | `nginx.conf`, `pytest.ini` | Archivos configuraci√≥n |
| **Docker** | **PascalCase** prefix | `Dockerfile.backend`, `Dockerfile.frontend` | Dockerfiles espec√≠ficos |
| **Scripts PowerShell** | `snake_case` | `smart_commit_clean.ps1`, `smart_commit_fast.ps1` | Scripts automatizaci√≥n |
| **Batch** | `snake_case` | `setup_tdd.bat`, `analyze_tech_debt.bat` | Scripts Windows |
| **Environment** | `.env` pattern | `.env.example`, `local.env` | Variables entorno |

#### **Documentaci√≥n**

| Tipo | Convenci√≥n | Ejemplo | Descripci√≥n |
|------|------------|---------|-------------|
| **Markdown** | **UPPERCASE** principales | `README.md`, `CHANGELOG.md` | Docs principales |
| **Gu√≠as** | **SCREAMING_SNAKE_CASE** | `GIT_BEST_PRACTICES.md`, `NAMING_CONVENTIONS.md` | Gu√≠as t√©cnicas |
| **Docs espec√≠ficas** | `lowercase` | `deployment.md`, `development.md` | Documentaci√≥n espec√≠fica |

## üî§ Variables y Funciones

### **Python**

| Elemento | Convenci√≥n | Ejemplo | Descripci√≥n |
|----------|------------|---------|-------------|
| **Variables** | `snake_case` | `user_name`, `prediction_result` | Variables locales |
| **Constantes** | `SCREAMING_SNAKE_CASE` | `API_BASE_URL`, `MAX_FILE_SIZE` | Constantes globales |
| **Funciones** | `snake_case` | `get_user_data()`, `validate_input()` | Funciones |
| **Clases** | **PascalCase** | `UserModel`, `PredictionService` | Clases |
| **M√©todos privados** | `_snake_case` | `_validate_data()`, `_process_result()` | M√©todos privados |
| **M√©todos especiales** | `__snake_case__` | `__init__()`, `__str__()` | M√©todos m√°gicos |

‚úÖ **Ejemplos Python CORRECTOS:**
```python
# Variables y constantes
user_name = "john_doe"
API_BASE_URL = "https://api.example.com"
MAX_RETRY_ATTEMPTS = 3

# Funciones
def get_user_predictions(user_id: int) -> List[Prediction]:
    """Obtiene predicciones del usuario."""
    return prediction_service.get_by_user_id(user_id)

def validate_prediction_input(data: dict) -> bool:
    """Valida datos de entrada para predicci√≥n."""
    return _check_required_fields(data)

# Clases
class PredictionService:
    """Servicio para manejar predicciones ML."""

    def __init__(self):
        self._model_cache = {}

    def _load_model(self, model_id: str):
        """Carga modelo en cache privadamente."""
        pass
```

### **TypeScript/JavaScript**

| Elemento | Convenci√≥n | Ejemplo | Descripci√≥n |
|----------|------------|---------|-------------|
| **Variables** | `camelCase` | `userName`, `predictionResult` | Variables locales |
| **Constantes** | `SCREAMING_SNAKE_CASE` | `API_BASE_URL`, `DEFAULT_TIMEOUT` | Constantes globales |
| **Funciones** | `camelCase` | `getUserData()`, `validateInput()` | Funciones |
| **Clases** | **PascalCase** | `UserModel`, `ApiService` | Clases |
| **Interfaces** | **PascalCase** con `I` | `IUser`, `IPrediction` | Interfaces |
| **Types** | **PascalCase** | `UserType`, `PredictionData` | Tipos personalizados |
| **Componentes** | **PascalCase** | `UserProfile`, `PredictionForm` | Componentes React |

‚úÖ **Ejemplos TypeScript CORRECTOS:**
```typescript
// Variables y constantes
const userName = "johnDoe";
const API_BASE_URL = "https://api.example.com";
const DEFAULT_TIMEOUT = 5000;

// Interfaces y tipos
interface IUser {
  id: number;
  name: string;
  email: string;
}

type PredictionData = {
  modelId: string;
  inputData: Record<string, any>;
};

// Funciones
const getUserPredictions = async (userId: number): Promise<IPrediction[]> => {
  return await apiService.get(`/users/${userId}/predictions`);
};

// Componentes React
const UserProfile: React.FC<{ user: IUser }> = ({ user }) => {
  return <div>{user.name}</div>;
};

// Clases
class ApiService {
  private baseUrl: string;

  constructor(baseUrl: string) {
    this.baseUrl = baseUrl;
  }

  async get(endpoint: string): Promise<any> {
    // implementaci√≥n
  }
}
```

## üóÑÔ∏è Base de Datos

### **Tablas y Columnas (SQL)**

| Elemento | Convenci√≥n | Ejemplo | Descripci√≥n |
|----------|------------|---------|-------------|
| **Tablas** | `snake_case` plural | `users`, `ml_predictions` | Nombres descriptivos plurales |
| **Columnas** | `snake_case` | `user_id`, `created_at` | Descriptivas y espec√≠ficas |
| **Claves primarias** | `id` | `id` | Siempre `id` simple |
| **Claves for√°neas** | `table_id` | `user_id`, `model_id` | Referencia clara a tabla |
| **√çndices** | `idx_table_column` | `idx_users_email`, `idx_predictions_date` | Prefijo descriptivo |
| **Constraints** | `type_table_column` | `fk_predictions_user_id`, `uk_users_email` | Tipo y descripci√≥n |

‚úÖ **Ejemplos SQL CORRECTOS:**
```sql
-- Tablas
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE ml_predictions (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL,
    model_id VARCHAR(50) NOT NULL,
    input_data JSONB NOT NULL,
    prediction_result JSONB NOT NULL,
    confidence_score DECIMAL(5,4),
    created_at TIMESTAMP DEFAULT NOW(),

    CONSTRAINT fk_predictions_user_id
        FOREIGN KEY (user_id) REFERENCES users(id)
);

-- √çndices
CREATE INDEX idx_predictions_user_id ON ml_predictions(user_id);
CREATE INDEX idx_predictions_created_at ON ml_predictions(created_at);
CREATE UNIQUE INDEX uk_users_email ON users(email);
```

## üåê URLs y APIs

### **Endpoints REST**

| Convenci√≥n | Ejemplo | Descripci√≥n |
|------------|---------|-------------|
| **Recursos** en plural | `/api/v1/users` | Colecciones de recursos |
| **kebab-case** para palabras m√∫ltiples | `/api/v1/ml-predictions` | Separado por guiones |
| **Verbos HTTP** expl√≠citos | `GET /users`, `POST /users` | Sin verbos en URL |
| **IDs** como path params | `/users/{user_id}` | Identificadores en ruta |
| **Filtros** como query params | `/users?status=active&page=1` | Par√°metros de consulta |

‚úÖ **Ejemplos API CORRECTOS:**
```
GET    /api/v1/users                    # ‚úÖ Listar usuarios
POST   /api/v1/users                    # ‚úÖ Crear usuario
GET    /api/v1/users/{user_id}          # ‚úÖ Obtener usuario espec√≠fico
PUT    /api/v1/users/{user_id}          # ‚úÖ Actualizar usuario
DELETE /api/v1/users/{user_id}          # ‚úÖ Eliminar usuario

GET    /api/v1/ml-predictions           # ‚úÖ Listar predicciones
POST   /api/v1/ml-predictions           # ‚úÖ Crear predicci√≥n
GET    /api/v1/ml-models                # ‚úÖ Listar modelos ML
POST   /api/v1/file-uploads             # ‚úÖ Subir archivos

# Con filtros
GET /api/v1/users?status=active&role=admin&page=1&limit=20
GET /api/v1/ml-predictions?user_id=123&model_id=rf_model&date_from=2024-01-01
```

## üì¶ Paquetes y M√≥dulos

### **Python Packages**

```
backend/
‚îú‚îÄ‚îÄ app/                    # ‚úÖ Paquete principal aplicaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ api/               # ‚úÖ Paquete API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ v1/            # ‚úÖ Versionado API
‚îÇ   ‚îú‚îÄ‚îÄ core/              # ‚úÖ Funcionalidad core
‚îÇ   ‚îú‚îÄ‚îÄ models/            # ‚úÖ Modelos de datos
‚îÇ   ‚îú‚îÄ‚îÄ services/          # ‚úÖ L√≥gica de negocio
‚îÇ   ‚îî‚îÄ‚îÄ utils/             # ‚úÖ Utilidades
‚îú‚îÄ‚îÄ tests/                 # ‚úÖ Tests separados
‚îÇ   ‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îú‚îÄ‚îÄ integration/
‚îÇ   ‚îî‚îÄ‚îÄ e2e/
‚îî‚îÄ‚îÄ requirements/          # ‚úÖ Dependencias organizadas
    ‚îú‚îÄ‚îÄ base.txt
    ‚îú‚îÄ‚îÄ dev.txt
    ‚îî‚îÄ‚îÄ prod.txt
```

### **Frontend Modules**

```
frontend/web-app/src/
‚îú‚îÄ‚îÄ components/            # ‚úÖ Componentes reutilizables
‚îÇ   ‚îú‚îÄ‚îÄ common/           # ‚úÖ Componentes comunes
‚îÇ   ‚îú‚îÄ‚îÄ forms/            # ‚úÖ Formularios
‚îÇ   ‚îî‚îÄ‚îÄ layout/           # ‚úÖ Layout components
‚îú‚îÄ‚îÄ pages/                # ‚úÖ P√°ginas principales
‚îú‚îÄ‚îÄ services/             # ‚úÖ Servicios API
‚îú‚îÄ‚îÄ hooks/                # ‚úÖ Custom hooks React
‚îú‚îÄ‚îÄ utils/                # ‚úÖ Utilidades
‚îú‚îÄ‚îÄ types/                # ‚úÖ Definiciones TypeScript
‚îî‚îÄ‚îÄ styles/               # ‚úÖ Estilos CSS/SCSS
```

## ‚úÖ Checklist de Verificaci√≥n

### **Antes de Crear Archivo:**

- [ ] ‚úÖ Nombre sigue convenci√≥n de tecnolog√≠a
- [ ] ‚úÖ Es descriptivo y espec√≠fico
- [ ] ‚úÖ No usa abreviaciones ambiguas
- [ ] ‚úÖ Est√° en directorio correcto
- [ ] ‚úÖ Extensi√≥n es apropiada

### **Antes de Nombrar Variable/Funci√≥n:**

- [ ] ‚úÖ Usa convenci√≥n del lenguaje (snake_case/camelCase)
- [ ] ‚úÖ Es descriptiva y clara
- [ ] ‚úÖ No usa nombres reservados
- [ ] ‚úÖ Sigue patrones del proyecto
- [ ] ‚úÖ Es pronunciable y buscable

### **Antes de Crear API Endpoint:**

- [ ] ‚úÖ Usa recursos en plural
- [ ] ‚úÖ Usa kebab-case para palabras m√∫ltiples
- [ ] ‚úÖ No incluye verbos en URL
- [ ] ‚úÖ Sigue estructura RESTful
- [ ] ‚úÖ Usa versionado (`/v1/`)

## üîß Herramientas de Validaci√≥n

El proyecto incluye herramientas autom√°ticas para validar convenciones:

```bash
# An√°lisis de convenciones Python
python infrastructure/scripts/tech_debt_analyzer.py

# Validaci√≥n de Git best practices
python infrastructure/scripts/git_best_practices.py

# Pre-commit hooks autom√°ticos
git commit  # Ejecuta validaciones autom√°ticamente
```

## üìö Referencias

- **[PEP 8](https://pep8.org/)**: Gu√≠a de estilo Python
- **[Google TypeScript Style Guide](https://google.github.io/styleguide/tsguide.html)**: Convenciones TypeScript
- **[REST API Naming Conventions](https://restfulapi.net/resource-naming/)**: Convenciones APIs REST
- **[SQL Style Guide](https://www.sqlstyle.guide/)**: Convenciones SQL

---

**Nota**: Estas convenciones est√°n integradas en nuestro sistema de calidad y se validan autom√°ticamente en cada commit mediante pre-commit hooks. ¬°Mantengamos el c√≥digo limpio y consistente! üöÄ
